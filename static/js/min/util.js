/*
 File:bwzx-1.0.0.js
 Date:2018-02-11
 Author:yanchangshou 
*/
function Util(){this.baseUrl="http://api.shihou.tv",this.lotteryBaseUrl="http://event.m.shihou.tv/shihou_lottery"}Util.prototype={getUrlParam:function(a,b){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");return b=b||window.location.search.substr(1).match(c),null!=b?unescape(b[2]):null},getUrlParams:function(){var a=window.location.href;if(null!=a)return a.substr(a.indexOf("?"),a.length)},parseResult:function(){var a=arguments.length;if(0==a)return"";for(var b=arguments[0],c=1;c<a;c++){if(void 0==b)return"";var d=arguments[c];if(c==a)return d;b=b[d]}return b},getUserId2:function(a){return setTimeout(function(){var a="";if("undefined"==typeof lion?(alert("获取token异常.请重新登陆或者在狮吼APP内打开.以下信息为开发者模式信息."),a="KEOLJLEPiMDuuYhMW2GnUBFdnj21LI7PkH2RHXuQGAtlxnHDlxfcrK"):a=JSON.parse(lion.get_token())["X-LION-TOKEN"],""==a)return null;var b="http://api.shihou.tv/api/user/info?token="+a;this.requestRemoteDataGetJson(b,null,function(a){a.data.user.id},!1)},300),user_id},getUserId:function(a){var b=this,c=this.getCookie("token1");if(""==c)return null;var d=this.lotteryBaseUrl+"/api/getUidByToken?xLionToken="+c;b.requestRemoteDataGetJson(d,null,a,!1)},getCookie:function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null},setCookie:function(a,b){var c=30,d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+d.toGMTString()+";path=/; domain=.event.m.shihou.tv"},requestRemoteDataGetJson:function(a,b,c,d){(new Date).getTime();$.ajax({url:a,type:"GET",async:d,cache:!1,dataType:"json",data:b,success:c,error:function(b){b.status;console.log(a+"获取数据失败!")}})},requestRemoteDataGetJson2:function(a,b,c,d,e){(new Date).getTime();$.ajax({url:a,type:"GET",async:e,cache:!1,dataType:"json",data:b,beforeSend:c,success:d,error:function(b){b.status;console.log(a+"获取数据失败!")}})},requestRemoteDataGetHtml:function(a,b,c,d){(new Date).getTime();$.ajax({url:a,type:"GET",async:d||!0,dataType:"html",data:b,success:c,error:function(b){b.status;console.log(a+"获取数据失败!")}})},requestRemoteDataPostJson:function(a,b,c,d){(new Date).getTime();$.ajax({url:a,type:"POST",async:d||!0,cache:!1,dataType:"json",data:b,success:c,error:function(b){b.status;console.log(a+"获取数据失败!")}})},clickTouch:function(){var a="touchend",b={versions:function(){var a=navigator.userAgent;navigator.appVersion;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1||a.indexOf("Linux")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};return a=b.versions.mobile?"touchend":"click"},sharePage:function(a,b,c,d,e){console.log("from_user_id:"+a),console.log("share_url:"+b),console.log("share_icon:"+c),console.log("share_title:"+d),console.log("share_desc:"+e);var f={qq:{url:b,img:c,title:d,subtitle:e},wx_person:{url:b,img:c,title:d,subtitle:e},wx_group:{url:b,img:c,title:d,subtitle:e},wb:{url:b,img:c,title:d,subtitle:e}};"undefined"!=typeof window.lion&&"function"==typeof window.lion.web_share&&window.lion.web_share(JSON.stringify(f))},wechatShare:function(a,b,c,d){var e={imgUrl:a,title:b,desc:c,link:d};$.ajax({url:"//test.youxiduo.com/shihou_kpl_guess/share_api_sign",type:"GET",async:!1,dataType:"json",data:{url:encodeURI(encodeURI(location.href.split("#")[0]))},success:function(a){console.log(a.result),wx.config({appId:a.result.appid,timestamp:a.result.timestamp,nonceStr:a.result.noncestr,signature:a.result.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline(e),wx.onMenuShareAppMessage(e),wx.onMenuShareQQ(e)}),wx.error(function(a){console.log("err",a)})},faile:function(a){alert(JSON.stringify(a))}})},log:function(a){console.log(a)},logURL:function(a){console.log("url --> "+a)},logParameter:function(a){console.log("parameter --> "+JSON.stringify(a))},logResult:function(a){console.log("result --> "+JSON.stringify(a))}};